---
title: Arroyo Cluster
description: "Running a distributed Arroyo cluster"
---

While the single-node Arroyo cluster is useful for testing and development, it is not suitable for production. This
page describes how to run a production-ready distributed Arroyo cluster using either Arroyo's built-in scheduler or
[nomad](https://www.nomadproject.io/).

Before attempting to run a cluster, you should familiarize yourself with the [Arroyo architecture](/architecture).

You will also need to set up a dev environment, as we do not yet distribute binaries. See the [dev setup](/dev-setup)
instructions.

## Common Setup

### Postgres

Arroyo relies on a postgres database to store configuration data and metadata. You will need to create a database
(by default called `arroyo`, but this can be configured) and run the migrations to set it up.

We use [refinery](https://github.com/rust-db/refinery) to manage migrations. To run the migrations on your database,
run these commands from your checkout of arroyo:

```bash
$ cargo install refinery_cli
$ refinery setup # follow the directions
$ refinery migrate -p arroyo-api/migrations
```

### S3

You will need to create a S3 bucket (or an equivalent service that exposes an S3-compatible API) to store checkpoints.
This will need to be writable by the nodes that are running the Arroyo controller and workers.

## Running the services

There are two options for running aa distributed cluster. You can either use Arroyo's built-in scheduler and ndoes, or
you can use [nomad](https://www.nomadproject.io/). Nomad is currently the recommended option, for production usecases.
The Arroyo services can be run via Nomad, or separately on VMs.

## Arroyo Scheduler



## Nomad
