---
title: Developer setup
description: "Set up your environment to develop Arroyo"
---

## Dependencies

To build Arroyo, you will need to install some dependencies.

### Ubuntu

```bash
$ sudo apt-get install pkg-config build-essential libssl-dev openssl cmake curl postgresql postgresql-client
$ sudo systemctl start postgresql
$ wget https://github.com/protocolbuffers/protobuf/releases/download/v21.8/protoc-21.8-linux-x86_64.zip
$ unzip protoc-21.8-linux-x86_64.zip
$ sudo mv bin/protoc /usr/local/bin
$ curl https://sh.rustup.rs -sSf | sh -s -- -y
$ cargo install wasm-pack
$ cargo install refinery_cli
```

### MacOS

Coming soon

## Postgres

Developing Arroyo requires running a properly configured postgres instance. By default,
it expects a database called `arroyo`, a user `arroyo` with password `arroyo`, although that
can be changed by setting the following environment variables:

* `DATABASE_NAME`
* `DATABASE_HOST`
* `DATABSE_PORT`
* `DATABASE_USER`
* `DATABASE_PASSWORD`

On Ubuntu, you can setup a compatible database like this:

```bash
$ sudo -u postgres psql -c "CREATE USER arroyo WITH PASSWORD 'arroyo' SUPERUSER;"
$ sudo -u postgres createdb arroyo
```

Migrations are managed using [refinery](https://github.com/rust-db/refinery). Once Postgres is
set up, you can initalize it with

```bash
$ refinery setup # follow the prompts
$ mv refinery.toml ~/
$ refinery migrate -c ~/refinery.toml -p arroyo-api/migrations
```

We use [cornucopia](https://github.com/cornucopia-rs/cornucopia) for typed-checked SQL queries. Our build is set up
to automatically re-generate the rust code for those queries on build, so you will need a DB set up for compilation
as well.

## Building the services

Arroyo is built via Cargo, the Rust build tool. To build all of the services in release mode, you can run

```
$ cargo build --release
```

## Building the frontend

We use pnpm and vite for frontend development.

Start by installing pnpm by following the instructions here: https://pnpm.io/installation.

Then you should be able to run the console in dev mode like this:

```
$ cd arroyo-console
$ pnpm install
$ pnpm dev
```

This will launch a dev server at http://localhost:5173 (note the api must
also be running locally for this to be functional).

To build the console (necessary before deploying for the hosted version to work) you
can run

```
$ pnpm build
```

## Running the services

Arroyo requires running at least two services: arroyo-api and arroyo-controller. See [here](/architecture) for an
overview of the services and what they do.

The services can be run with cargo:

```bash
$ cargo run --bin arroyo-controller
# in a separate terminal
$ cargo run --bin arroyo-api
```

To get faster compilation of pipelines, you can also run the compile service:

```bash
$ cargo run --bin arroyo-compiler-service
```

then set the `REMOTE_COMPILER_ENDPOINT` environment variable when running the controller like this:

```bash
$ REMOTE_COMPILER_ENDPOINT=http://localhost:9000 cargo run --bin arroyo-controller
```

